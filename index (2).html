<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸ’Œ For Vikita</title>

  <style>
    :root{
      --space:#2b2b2e;
      --beige:#faf6f2;
      --blush:#f7a3b7; /* richer blush inspired by f26a8d */
      --pink:#f26a8d;  /* primary romantic pink */
      --text:#1c1c1e;
      --muted:#555;
      --card:#ffffffcc;
      --shadow: 0 20px 60px rgba(0,0,0,.12);
      --radius:22px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Helvetica Neue", Helvetica, Arial, system-ui;
      background:
        radial-gradient(circle at 20% 10%, rgba(242,106,141,.35), transparent 55%),
        radial-gradient(circle at 80% 90%, rgba(247,214,223,.45), transparent 60%),
        linear-gradient(135deg, #fff1f4, var(--beige));
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:stretch;
      padding:10px;
      overflow:hidden;
    }

    /* Floating Hearts */
    .heart{
      position:absolute;
      width:14px;height:14px;
      background:rgba(242,106,141,.45);
      transform:rotate(45deg);
      border-radius:4px;
      animation:floatUp linear infinite;
      filter:blur(.1px);
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      background:rgba(242,106,141,.45);
      border-radius:50%;
    }
    .heart:before{left:-7px;top:0}
    .heart:after{top:-7px;left:0}

    @keyframes floatUp{
      from{transform:translateY(30vh) rotate(45deg);}
      to{transform:translateY(-120vh) rotate(45deg);}
    }

    /* Window Frame */
    .window{
      width: min(100vw - 20px, 460px);
      height: calc(100dvh - 20px);
      max-height: calc(100vh - 20px);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:var(--shadow);
      border:1px solid rgba(0,0,0,.08);
      background:white;
      display:flex;
      flex-direction:column;
    }

    /* iOS safe areas */
    @supports (padding: max(0px)){
      body{ padding: max(10px, env(safe-area-inset-top)) max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left)); }
    }

    @media (max-width: 520px){
      .window{ width: calc(100vw - 20px); }
    }

    .topbar{
      height:48px;
      background:rgba(43,43,46,.96);
      display:flex;
      align-items:center;
      padding:0 14px;
      gap:10px;
      user-select:none;
    }

    .dot{
      width:12px;height:12px;
      border-radius:50%;
    }
    .r{background:#ff5f57}
    .y{background:#febc2e}
    .g{background:#28c840}

    .topbar span{
      margin-left:10px;
      color:rgba(255,255,255,.6);
      font-size:13px;
      letter-spacing:.2px;
    }

    /* Pages */
    .page{
      padding:18px;
      flex:1;
      display:none;
      animation:fadeIn .5s ease;
      height:100%;
      overflow-y:auto; /* allow scroll on every page */
      -webkit-overflow-scrolling:touch;
      min-height:0;
    }
    .page.active{display:flex; min-height:0;}

    @keyframes fadeIn{
      from{opacity:0; transform:translateY(10px);}
      to{opacity:1; transform:translateY(0);}
    }

    /* Cards */
    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:22px;
      box-shadow:0 10px 30px rgba(0,0,0,.06);
      border:1px solid rgba(0,0,0,.06);
      width:100%;
      min-height:100%;
      height:auto;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:12px;
      text-align:center;
    }

    /* Page 0 (love letter) layout */
    #page0 .card{
      align-items:stretch;
      justify-content:flex-start;
      text-align:left;
      gap:14px;
    }
    #page0 .content{
      display:flex;
      flex-direction:column;
      gap:14px;
      flex:1;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      padding-right:6px;
      scrollbar-gutter: stable;
    }
    #page0 .footer{
      margin-top:auto;
      padding-top:10px;
      display:flex;
      justify-content:center;
      position:sticky;
      bottom:0;
      background:linear-gradient(to top, rgba(255,255,255,.92), rgba(255,255,255,0));
      backdrop-filter:saturate(1.2) blur(6px);
    }

    h1,h2{
      margin:0;
      color:var(--text);
      font-weight:600;
      letter-spacing:-.4px;
    }

    .bodyText{
      color:var(--muted);
      line-height:1.65;
      font-size:15.5px;
      font-weight:500;
      margin:0;
      white-space:pre-wrap;
    }

    img.gif{
      max-width:320px;
      margin-left:auto;
      margin-right:auto;
      width:100%;
      max-height:240px;
      aspect-ratio:1/1;
      object-fit:cover;
      border-radius:20px;
      border:1px solid rgba(0,0,0,.08);
    }

    /* Buttons */
    .btns{
      margin-top:20px;
      display:flex;
      justify-content:center;
      gap:14px;
      flex-wrap:wrap;
    }

    button{
      border:none;
      padding:14px 20px;
      border-radius:999px;
      font-weight:700;
      font-size:15px;
      cursor:pointer;
      transition:.15s ease;
    }
    button:active{transform:scale(.97);}

    .primary{
      background:linear-gradient(135deg,var(--pink),#ffdde6);
      color:#111;
      box-shadow:0 8px 18px rgba(242,106,141,.35);
    }

    .yes{
      background:#1db954;
      color:#0b0b0b;
      padding:16px 26px;
      font-size:16px;
    }

    .no{
      background:rgba(0,0,0,.06);
      color:#444;
      padding:12px 18px;
      font-size:14px;
    }

    /* Confetti Canvas */
    canvas{
      position:fixed;
      inset:0;
      pointer-events:none;
    }

    /* Topbar dot buttons */
    .topbar .dot{
      border:0;
      padding:0;
      cursor:pointer;
    }
    .topbar .dot:active{transform:scale(.95)}

    /* Envelope */
    .envelopeWrap{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .envelope{
      position:relative;
      width:min(320px, 86%);
      aspect-ratio:4/3;
      border-radius:18px;
      background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,240,245,.9));
      box-shadow:0 18px 50px rgba(0,0,0,.10);
      border:1px solid rgba(0,0,0,.08);
      position:relative;
      overflow:hidden;
      cursor:pointer;
      transition:transform .18s ease;
    }
    .envelope:active{transform:scale(.99)}
    .envTop{
      z-index:2;
      position:absolute;
      inset:0;
      background:linear-gradient(135deg, rgba(242,106,141,.55), rgba(255,255,255,.55));
      clip-path:polygon(0 0, 100% 0, 50% 55%);
      transform-origin:top;
      transition:transform .35s ease;
    }
    .envBody{
      z-index:0;
      position:absolute;
      inset:0;
      background:linear-gradient(135deg, rgba(255,255,255,.75), rgba(247,214,223,.55));
    }
    .envBottom{
      z-index:1;
      position:absolute;
      inset:0;
      clip-path:polygon(0 100%, 100% 100%, 50% 45%);
      background:linear-gradient(135deg, rgba(242,106,141,.35), rgba(255,255,255,.65));
    }
    .envSeal{
      z-index:3;
      position:absolute;
      left:50%;
      top:58%;
      transform:translate(-50%,-50%);
      width:54px;
      height:54px;
      border-radius:18px;
      background:linear-gradient(135deg, rgba(242,106,141,.95), rgba(255,221,230,.9));
      box-shadow:0 10px 20px rgba(242,106,141,.25);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:22px;
      border:1px solid rgba(0,0,0,.06);
    }
    .envLabel{
      z-index:3;
      position:absolute;
      left:50%;
      bottom:14px;
      transform:translateX(-50%);
      color:rgba(28,28,30,.75);
      font-size:13px;
      font-weight:600;
      letter-spacing:.2px;
    }
    .envTo{
      z-index:4;
      position:absolute;
      top:12px;
      left:12px;
      padding:6px 10px;
      border-radius:12px;
      background:rgba(255,255,255,.55);
      border:1px solid rgba(0,0,0,.06);
      color:rgba(28,28,30,.78);
      font-size:12px;
      font-weight:700;
      letter-spacing:.2px;
      backdrop-filter:saturate(1.2) blur(6px);
    }
    .envFrom{
      z-index:4;
      position:absolute;
      bottom:12px;
      right:12px;
      padding:6px 10px;
      border-radius:12px;
      background:rgba(255,255,255,.55);
      border:1px solid rgba(0,0,0,.06);
      color:rgba(28,28,30,.78);
      font-size:12px;
      font-weight:700;
      letter-spacing:.2px;
      backdrop-filter:saturate(1.2) blur(6px);
    }
    
    /* Rose petals (question page) */
    #page1{position:relative; overflow:hidden;}
    #petals{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:0;
    }
    #page1 .card{position:relative; z-index:1;}
    .petal{
      position:absolute;
      width:22px;
      height:18px;
      background:transparent;
      opacity:1;
      border-radius:0;
      filter:drop-shadow(0 2px 4px rgba(0,0,0,.06));
      animation:petalFall linear infinite;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64"><path fill="%23d62828" fill-opacity="0.85" d="M32 6c7 10 18 16 18 28 0 12-9 20-18 24C23 54 14 46 14 34 14 22 25 16 32 6z"/></svg>');
      background-size:contain;
      background-repeat:no-repeat;
    }
    }
    
    @keyframes petalFall{
      from{ transform:translateY(-15vh) translateX(0) rotate(0deg); }
      to{ transform:translateY(120vh) translateX(25px) rotate(220deg); }
    }
    .letterOpen .envTop{ transform:rotateX(180deg); }
    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="window">
    <div class="topbar">
      <button class="dot r" id="btnClose" aria-label="Close"></button>
      <button class="dot y" id="btnBack" aria-label="Back"></button>
      <div class="dot g" aria-hidden="true"></div>
      <span>valentine.exe ðŸ’Œ</span>
    </div>

    <!-- PAGE 0 -->
    <div class="page active" id="page0">
      <div class="card" id="page0Card">
        <div class="envelopeWrap" id="envelopeWrap">
          <div class="envelope" id="envelope" role="button" aria-label="Open letter">
            <div class="envBody"></div>
            <div class="envBottom"></div>
            <div class="envTop"></div>
            <div class="envSeal">ðŸ’Œ</div>
            <div class="envLabel">Tap to open</div>
            <div class="envTo">For Vikita</div>
            <div class="envFrom">From Sach</div>
          </div>
        </div>

        <div class="content hidden" id="letterContent">
          <p id="typing" class="bodyText"></p>

          <img class="gif" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdDQycDdibDZianBtYWJqbTZvcmNqbDdwenBvbDdrYTc3YzB3NmFpcSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/IzXiddo2twMmdmU8Lv/giphy.gif" alt="cute gif">
        </div>

        <div class="footer hidden" id="page0Footer">
          <button class="primary" onclick="goTo(1)">Next...ðŸ’–</button>
        </div>
      </div>
    </div>

    <!-- PAGE 1 -->
    <div class="page" id="page1">
      <div id="petals" aria-hidden="true"></div>
      <div class="card">
        <h1>Will you be my Valentine Vikita? ðŸ’Œ</h1>

        <div class="btns">
          <button class="yes" onclick="yesClick()">YES ðŸ’š</button>
          <button class="no" onclick="noClick()">NO</button>
        </div>
      </div>
    </div>

    <!-- PAGE 2 YES -->
    <div class="page" id="page2">
      <div class="card">
        <h1>MWAHH I knew you would say yes ðŸ˜˜</h1>
        <div class="bodyText" style="text-align:center; font-weight:600;">my gorgeous baby girl</div>

        <img class="gif" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMnU2cmJ4NGlhMml5dzRvdGl0OHA1YTN3NmRrY3lyZW5laXprdjN4aCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/W1hd3uXRIbddu/giphy.gif" alt="kiss gif">

        <div class="btns">
          <button class="primary" onclick="yesClick()">Confetti Again ðŸŽ‰</button>
        </div>
      </div>
    </div>

    <!-- PAGE 3 NO -->
    <div class="page" id="page3">
      <div class="card">
        <h2 id="noMsg"></h2>
        <img class="gif" id="noGif" src="" alt="no gif">

        <div class="btns">
          <button class="yes" onclick="yesClick()">Okay fineâ€¦ YES ðŸ’š</button>
          <button class="no" onclick="noClick()">Try No again</button>
        </div>
      </div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  /* Floating hearts */
  for(let i=0;i<20;i++){
    const h=document.createElement("div");
    h.className="heart";
    const size=10+Math.random()*16;
    h.style.width=size+"px";
    h.style.height=size+"px";
    h.style.left=Math.random()*100+"vw";
    h.style.bottom=(-20-Math.random()*40)+"vh";
    h.style.animationDuration=(8+Math.random()*12)+"s";
    h.style.opacity=(0.12+Math.random()*0.22);
    document.body.appendChild(h);
  }

  /* Page navigation + history */
  let currentPage = 0;
  const historyStack = [];

  function showPage(n){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    const el = document.getElementById("page"+n);
    if(el) el.classList.add("active");
    currentPage = n;

    // Toggle petals only on question page
    const petalsEl = document.getElementById("petals");
    if(petalsEl){
      petalsEl.style.display = (n === 1) ? "block" : "none";
    }
  }

  window.goTo = function(n){
    if(n === currentPage) return;
    historyStack.push(currentPage);
    showPage(n);
  };

  function goBack(){
    if(currentPage === 0 && envelopeOpen){
      closeEnvelope();
      return;
    }
    const prev = historyStack.pop();
    if(prev === undefined) return;
    showPage(prev);
  }

  function goHomeClosed(){
    if(currentPage !== 0){
      historyStack.push(currentPage);
    }
    showPage(0);
    closeEnvelope();
  }

  document.getElementById("btnBack").addEventListener("click", goBack);
  document.getElementById("btnClose").addEventListener("click", goHomeClosed);

  /* Rose petals generator (question page only) */
  const petalsRoot = document.getElementById("petals");
  if(petalsRoot){
    const PETAL_COUNT = 22;
    for(let i=0;i<PETAL_COUNT;i++){
      const p = document.createElement("div");
      p.className = "petal";
      const size = 10 + Math.random()*10;
      p.style.width = size + "px";
      p.style.height = (size*0.7) + "px";
      p.style.left = (Math.random()*100) + "%";
      p.style.animationDuration = (10 + Math.random()*14) + "s";
      p.style.animationDelay = (-Math.random()*12) + "s";
      p.style.opacity = (0.10 + Math.random()*0.16);
      p.style.transform = `rotate(${Math.random()*60-30}deg)`;
      petalsRoot.appendChild(p);
    }
    petalsRoot.style.display = "none";
  }

  /* Typing Effect (Silent) */
  const essay = `Hey Vikita ðŸ’Œ Youâ€™re probably wondering why I sent you this little website.\n\nI just wanted to do something small but special to say I love you. These next few months might be hard, but weâ€™ll get through it together.\n\nYouâ€™ve been the one person whoâ€™s helped me more than you know. Every time Iâ€™ve argued with my parents, every time I didnâ€™t want to study and you told me tooâ€¦ youâ€™ve been there for me. Always.\n\nAnd I hope Iâ€™ve been the same for you, because you truly are perfect. I say it all the time, it is cause I mean it. You are the sweetest, most incredible person ever.\n\n(Alsoâ€¦ youâ€™re basically an angel, but shhh, thatâ€™s our secret ðŸ˜Œ)\n\nMwah.\n\nSoâ€¦ can I ask you something?`;

  let idx=0;
  const typingEl=document.getElementById("typing");
  typingEl.textContent = "";

  function type(){
    if(idx < essay.length){
      typingEl.textContent += essay[idx];
      idx++;
      setTimeout(type, 18);
    }
  }
  type();

  /* Envelope open/close */
  let envelopeOpen = false;
  const envelopeWrap = document.getElementById("envelopeWrap");
  const envelope = document.getElementById("envelope");
  const letterContent = document.getElementById("letterContent");
  const page0Footer = document.getElementById("page0Footer");
  const page0Card = document.getElementById("page0Card");

  function openEnvelope(){
    envelopeOpen = true;
    envelopeWrap.classList.add("hidden");
    letterContent.classList.remove("hidden");
    page0Footer.classList.remove("hidden");
    page0Card.classList.add("letterOpen");
  }

  function closeEnvelope(){
    envelopeOpen = false;
    envelopeWrap.classList.remove("hidden");
    letterContent.classList.add("hidden");
    page0Footer.classList.add("hidden");
    page0Card.classList.remove("letterOpen");
  }

  envelope.addEventListener("click", openEnvelope);

  closeEnvelope();
  showPage(0);

  /* NO messages */
  const noOptions=[
    {msg:"Error: youâ€™re too loved to click no baby girl.",
      gif:"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDZmcG43cjczcHZnNWFua2dkc2s1c2c3ODNoeTVjZTdwYWpraWU5ayZlcD12MV9naWZzX3NlYXJjaCZjdD1n/TF70h4JBEGos5OxIhK/giphy.gif"},
    {msg:"Hey not funny Vikita ðŸ˜¤ I know you love me.",
      gif:"https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3N2wwNGkydGU4bThoOG5sODI4eTk5dWVoMms3Mnhrb2hvMWQ3M2xjNCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/uKvAWApE3vWL1MAASf/giphy.gif"},
    {msg:"Misclick, silly bagel ðŸ¥¯. Try again.",
      gif:"https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3dXBnZmFzdHl5M3R1dGQ3czZmcG05d3R5ZDY1emxjZ25hdmZncmkyeiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/tMLmSH6BTHsxPNIM9G/giphy.gif"},
    {msg:"Aww youâ€™re just testing my creationâ€¦ so sweet. (Now press YES ðŸ˜Œ)",
      gif:"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNGtrY2FjeXIxZnNkN3FoYTVzamprNGQ3cnNrd2t5NTY5ZTZ2OW45ZiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/X42IAaDJ42pHqPllGk/giphy.gif"},
    {msg:"That button is decorative little miss. ur supposed to click yes",
      gif:"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcDhqdnFxYmRnOHE0Y3F3cmxqbjRsNjlxaGV3N3V5NWl4MXcybnUyNiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/aIyc5hmsohhwVRg388/giphy.gif"},
    {msg:"No is something an irrational consumer would do little miss economist",
      gif:"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDVuYjY0d2JhZGsxYzUzcHBlb2dqcm91bjAydmRpdmJoNW9tNDJ4ZiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/eODmhVKJHDCiQ/giphy.gif"},
    {msg:"Clicking no causes a negative externality pls click yes",
      gif:"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDVuYjY0d2JhZGsxYzUzcHBlb2dqcm91bjAydmRpdmJoNW9tNDJ4ZiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/x28cIQSn19Tbi/giphy.gif"},
    {msg:"Nice try baby. Valentine request still pendingâ€¦",
      gif:"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDVuYjY0d2JhZGsxYzUzcHBlb2dqcm91bjAydmRpdmJoNW9tNDJ4ZiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/11vVUnbjUONl3q/giphy.gif"}
  ];

  window.noClick = function(){
    window.goTo(3);
    const pick=noOptions[Math.floor(Math.random()*noOptions.length)];
    document.getElementById("noMsg").textContent=pick.msg;
    document.getElementById("noGif").src=pick.gif;
  };

  /* Confetti (tiny hearts, RGB) */
  const canvas=document.getElementById("confetti");
  const ctx=canvas.getContext("2d");
  let confetti=[];

  function resize(){
    canvas.width=innerWidth;
    canvas.height=innerHeight;
  }
  addEventListener("resize",resize);
  resize();

  function drawHeart(x,y,size,color){
    ctx.save();
    ctx.translate(x,y);
    ctx.scale(size/10,size/10);
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.moveTo(0,3);
    ctx.bezierCurveTo(0,-3,-5,-3,-5,1);
    ctx.bezierCurveTo(-5,5,0,7,0,10);
    ctx.bezierCurveTo(0,7,5,5,5,1);
    ctx.bezierCurveTo(5,-3,0,-3,0,3);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  function burst(){
    confetti=[];
    const colors=["#ff3b30","#34c759","#007aff"]; // red, green, blue
    for(let i=0;i<180;i++){
      confetti.push({
        color:colors[Math.floor(Math.random()*colors.length)],
        x:Math.random()*innerWidth,
        y:-20,
        vx:-2+Math.random()*4,
        vy:2+Math.random()*5,
        r:3+Math.random()*5
      });
    }
    animate();
  }

  function animate(){
    ctx.clearRect(0,0,innerWidth,innerHeight);
    confetti.forEach(p=>{
      p.x+=p.vx;
      p.y+=p.vy;
      p.vy+=0.05;
      drawHeart(p.x,p.y,p.r*2,p.color);
    });
    confetti=confetti.filter(p=>p.y<innerHeight+30);
    if(confetti.length) requestAnimationFrame(animate);
  }

  window.yesClick = function(){
    window.goTo(2);
    burst();
  };

  // --- Basic runtime checks (lightweight â€œtestsâ€) ---
  console.assert(typeof window.goTo === 'function', 'goTo should exist');
  console.assert(typeof window.yesClick === 'function', 'yesClick should exist');
  console.assert(typeof window.noClick === 'function', 'noClick should exist');
  console.assert(document.getElementById('page0'), 'page0 should exist');
  console.assert(document.getElementById('btnBack'), 'btnBack should exist');
  console.assert(document.getElementById('btnClose'), 'btnClose should exist');

  // Confetti heart renderer sanity check
  try {
    drawHeart(-100,-100,10,'#ff3b30');
    console.assert(true, 'drawHeart should not throw');
  } catch(e) {
    console.assert(false, 'drawHeart threw unexpectedly');
  }
});
</script>

</body>
</html>
